{"version":3,"sources":["../../src/components/LogoutButtonClient.tsx"],"sourcesContent":["'use client'\n\nimport { toast } from '@payloadcms/ui'\nimport { createAuthClient } from 'better-auth/react'\nimport { useRouter } from 'next/navigation.js'\nimport { useState } from 'react'\n\nimport type { AuthClientOptions } from './BetterAuthLoginServer'\n\n/**\n * Simple logout icon SVG component\n */\nfunction LogOutIcon() {\n  return (\n    <svg\n      fill=\"none\"\n      height=\"20\"\n      stroke=\"currentColor\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeWidth=\"2\"\n      viewBox=\"0 0 24 24\"\n      width=\"20\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" />\n      <polyline points=\"16 17 21 12 16 7\" />\n      <line x1=\"21\" x2=\"9\" y1=\"12\" y2=\"12\" />\n    </svg>\n  )\n}\n\nexport interface LogoutButtonClientProps {\n  /**\n   * Auth client options for Better Auth sign-out.\n   * Uses the external (browser-accessible) URL.\n   */\n  authClientOptions: AuthClientOptions\n}\n\nexport function LogoutButtonClient({ authClientOptions }: LogoutButtonClientProps) {\n  const authClient = createAuthClient(authClientOptions)\n  const router = useRouter()\n  const [isLoading, setIsLoading] = useState(false)\n\n  const handleLogout = async () => {\n    if (isLoading) {\n      return\n    }\n\n    setIsLoading(true)\n\n    try {\n      // Sign out from Better Auth - this clears the session cookie\n      const result = await authClient.signOut()\n\n      if (result.error) {\n        toast.error(result.error.message || 'Logout failed')\n        setIsLoading(false)\n        return\n      }\n\n      // Redirect to login page after successful sign-out\n      router.push('/admin/login')\n      router.refresh()\n    } catch (error) {\n      toast.error((error as Error).message || 'Logout failed')\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <button\n      aria-label=\"Log out\"\n      disabled={isLoading}\n      onClick={handleLogout}\n      style={{\n        alignItems: 'center',\n        background: 'transparent',\n        border: 'none',\n        color: 'inherit',\n        cursor: isLoading ? 'wait' : 'pointer',\n        display: 'flex',\n        fontFamily: 'inherit',\n        fontSize: 'inherit',\n        gap: '0.5rem',\n        opacity: isLoading ? 0.6 : 1,\n        padding: '0.75rem 1rem',\n        textAlign: 'left',\n        transition: 'opacity 0.2s',\n        width: '100%',\n      }}\n      type=\"button\"\n    >\n      <LogOutIcon />\n      <span>{isLoading ? 'Logging out...' : 'Logout'}</span>\n    </button>\n  )\n}\n"],"names":["toast","createAuthClient","useRouter","useState","LogOutIcon","svg","fill","height","stroke","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","width","xmlns","path","d","polyline","points","line","x1","x2","y1","y2","LogoutButtonClient","authClientOptions","authClient","router","isLoading","setIsLoading","handleLogout","result","signOut","error","message","push","refresh","button","aria-label","disabled","onClick","style","alignItems","background","border","color","cursor","display","fontFamily","fontSize","gap","opacity","padding","textAlign","transition","type","span"],"mappings":"AAAA;;AAEA,SAASA,KAAK,QAAQ,iBAAgB;AACtC,SAASC,gBAAgB,QAAQ,oBAAmB;AACpD,SAASC,SAAS,QAAQ,qBAAoB;AAC9C,SAASC,QAAQ,QAAQ,QAAO;AAIhC;;CAEC,GACD,SAASC;IACP,qBACE,MAACC;QACCC,MAAK;QACLC,QAAO;QACPC,QAAO;QACPC,eAAc;QACdC,gBAAe;QACfC,aAAY;QACZC,SAAQ;QACRC,OAAM;QACNC,OAAM;;0BAEN,KAACC;gBAAKC,GAAE;;0BACR,KAACC;gBAASC,QAAO;;0BACjB,KAACC;gBAAKC,IAAG;gBAAKC,IAAG;gBAAIC,IAAG;gBAAKC,IAAG;;;;AAGtC;AAUA,OAAO,SAASC,mBAAmB,EAAEC,iBAAiB,EAA2B;IAC/E,MAAMC,aAAazB,iBAAiBwB;IACpC,MAAME,SAASzB;IACf,MAAM,CAAC0B,WAAWC,aAAa,GAAG1B,SAAS;IAE3C,MAAM2B,eAAe;QACnB,IAAIF,WAAW;YACb;QACF;QAEAC,aAAa;QAEb,IAAI;YACF,6DAA6D;YAC7D,MAAME,SAAS,MAAML,WAAWM,OAAO;YAEvC,IAAID,OAAOE,KAAK,EAAE;gBAChBjC,MAAMiC,KAAK,CAACF,OAAOE,KAAK,CAACC,OAAO,IAAI;gBACpCL,aAAa;gBACb;YACF;YAEA,mDAAmD;YACnDF,OAAOQ,IAAI,CAAC;YACZR,OAAOS,OAAO;QAChB,EAAE,OAAOH,OAAO;YACdjC,MAAMiC,KAAK,CAAC,AAACA,MAAgBC,OAAO,IAAI;YACxCL,aAAa;QACf;IACF;IAEA,qBACE,MAACQ;QACCC,cAAW;QACXC,UAAUX;QACVY,SAASV;QACTW,OAAO;YACLC,YAAY;YACZC,YAAY;YACZC,QAAQ;YACRC,OAAO;YACPC,QAAQlB,YAAY,SAAS;YAC7BmB,SAAS;YACTC,YAAY;YACZC,UAAU;YACVC,KAAK;YACLC,SAASvB,YAAY,MAAM;YAC3BwB,SAAS;YACTC,WAAW;YACXC,YAAY;YACZzC,OAAO;QACT;QACA0C,MAAK;;0BAEL,KAACnD;0BACD,KAACoD;0BAAM5B,YAAY,mBAAmB;;;;AAG5C"}