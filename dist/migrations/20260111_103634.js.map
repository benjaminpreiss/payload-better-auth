{"version":3,"sources":["../../src/migrations/20260111_103634.ts"],"sourcesContent":["import { MigrateUpArgs, MigrateDownArgs, sql } from '@payloadcms/db-sqlite'\n\nexport async function up({ db, payload, req }: MigrateUpArgs): Promise<void> {\n  await db.run(sql`CREATE TABLE \\`posts\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`updated_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`created_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`posts_updated_at_idx\\` ON \\`posts\\` (\\`updated_at\\`);`)\n  await db.run(sql`CREATE INDEX \\`posts_created_at_idx\\` ON \\`posts\\` (\\`created_at\\`);`)\n  await db.run(sql`CREATE TABLE \\`media\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`updated_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`created_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`url\\` text,\n  \t\\`thumbnail_u_r_l\\` text,\n  \t\\`filename\\` text,\n  \t\\`mime_type\\` text,\n  \t\\`filesize\\` numeric,\n  \t\\`width\\` numeric,\n  \t\\`height\\` numeric,\n  \t\\`focal_x\\` numeric,\n  \t\\`focal_y\\` numeric\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`media_updated_at_idx\\` ON \\`media\\` (\\`updated_at\\`);`)\n  await db.run(sql`CREATE INDEX \\`media_created_at_idx\\` ON \\`media\\` (\\`created_at\\`);`)\n  await db.run(sql`CREATE UNIQUE INDEX \\`media_filename_idx\\` ON \\`media\\` (\\`filename\\`);`)\n  await db.run(sql`CREATE TABLE \\`users\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`external_id\\` text NOT NULL,\n  \t\\`name\\` text,\n  \t\\`updated_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`created_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL\n  );\n  `)\n  await db.run(sql`CREATE UNIQUE INDEX \\`users_external_id_idx\\` ON \\`users\\` (\\`external_id\\`);`)\n  await db.run(sql`CREATE INDEX \\`users_updated_at_idx\\` ON \\`users\\` (\\`updated_at\\`);`)\n  await db.run(sql`CREATE INDEX \\`users_created_at_idx\\` ON \\`users\\` (\\`created_at\\`);`)\n  await db.run(sql`CREATE TABLE \\`payload_kv\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`key\\` text NOT NULL,\n  \t\\`data\\` text NOT NULL\n  );\n  `)\n  await db.run(sql`CREATE UNIQUE INDEX \\`payload_kv_key_idx\\` ON \\`payload_kv\\` (\\`key\\`);`)\n  await db.run(sql`CREATE TABLE \\`payload_locked_documents\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`global_slug\\` text,\n  \t\\`updated_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`created_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_global_slug_idx\\` ON \\`payload_locked_documents\\` (\\`global_slug\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_updated_at_idx\\` ON \\`payload_locked_documents\\` (\\`updated_at\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_created_at_idx\\` ON \\`payload_locked_documents\\` (\\`created_at\\`);`)\n  await db.run(sql`CREATE TABLE \\`payload_locked_documents_rels\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`order\\` integer,\n  \t\\`parent_id\\` integer NOT NULL,\n  \t\\`path\\` text NOT NULL,\n  \t\\`posts_id\\` integer,\n  \t\\`media_id\\` integer,\n  \t\\`users_id\\` integer,\n  \tFOREIGN KEY (\\`parent_id\\`) REFERENCES \\`payload_locked_documents\\`(\\`id\\`) ON UPDATE no action ON DELETE cascade,\n  \tFOREIGN KEY (\\`posts_id\\`) REFERENCES \\`posts\\`(\\`id\\`) ON UPDATE no action ON DELETE cascade,\n  \tFOREIGN KEY (\\`media_id\\`) REFERENCES \\`media\\`(\\`id\\`) ON UPDATE no action ON DELETE cascade,\n  \tFOREIGN KEY (\\`users_id\\`) REFERENCES \\`users\\`(\\`id\\`) ON UPDATE no action ON DELETE cascade\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_rels_order_idx\\` ON \\`payload_locked_documents_rels\\` (\\`order\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_rels_parent_idx\\` ON \\`payload_locked_documents_rels\\` (\\`parent_id\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_rels_path_idx\\` ON \\`payload_locked_documents_rels\\` (\\`path\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_rels_posts_id_idx\\` ON \\`payload_locked_documents_rels\\` (\\`posts_id\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_rels_media_id_idx\\` ON \\`payload_locked_documents_rels\\` (\\`media_id\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_locked_documents_rels_users_id_idx\\` ON \\`payload_locked_documents_rels\\` (\\`users_id\\`);`)\n  await db.run(sql`CREATE TABLE \\`payload_preferences\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`key\\` text,\n  \t\\`value\\` text,\n  \t\\`updated_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`created_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_key_idx\\` ON \\`payload_preferences\\` (\\`key\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_updated_at_idx\\` ON \\`payload_preferences\\` (\\`updated_at\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_created_at_idx\\` ON \\`payload_preferences\\` (\\`created_at\\`);`)\n  await db.run(sql`CREATE TABLE \\`payload_preferences_rels\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`order\\` integer,\n  \t\\`parent_id\\` integer NOT NULL,\n  \t\\`path\\` text NOT NULL,\n  \t\\`users_id\\` integer,\n  \tFOREIGN KEY (\\`parent_id\\`) REFERENCES \\`payload_preferences\\`(\\`id\\`) ON UPDATE no action ON DELETE cascade,\n  \tFOREIGN KEY (\\`users_id\\`) REFERENCES \\`users\\`(\\`id\\`) ON UPDATE no action ON DELETE cascade\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_rels_order_idx\\` ON \\`payload_preferences_rels\\` (\\`order\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_rels_parent_idx\\` ON \\`payload_preferences_rels\\` (\\`parent_id\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_rels_path_idx\\` ON \\`payload_preferences_rels\\` (\\`path\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_preferences_rels_users_id_idx\\` ON \\`payload_preferences_rels\\` (\\`users_id\\`);`)\n  await db.run(sql`CREATE TABLE \\`payload_migrations\\` (\n  \t\\`id\\` integer PRIMARY KEY NOT NULL,\n  \t\\`name\\` text,\n  \t\\`batch\\` numeric,\n  \t\\`updated_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL,\n  \t\\`created_at\\` text DEFAULT (strftime('%Y-%m-%dT%H:%M:%fZ', 'now')) NOT NULL\n  );\n  `)\n  await db.run(sql`CREATE INDEX \\`payload_migrations_updated_at_idx\\` ON \\`payload_migrations\\` (\\`updated_at\\`);`)\n  await db.run(sql`CREATE INDEX \\`payload_migrations_created_at_idx\\` ON \\`payload_migrations\\` (\\`created_at\\`);`)\n}\n\nexport async function down({ db, payload, req }: MigrateDownArgs): Promise<void> {\n  await db.run(sql`DROP TABLE \\`posts\\`;`)\n  await db.run(sql`DROP TABLE \\`media\\`;`)\n  await db.run(sql`DROP TABLE \\`users\\`;`)\n  await db.run(sql`DROP TABLE \\`payload_kv\\`;`)\n  await db.run(sql`DROP TABLE \\`payload_locked_documents\\`;`)\n  await db.run(sql`DROP TABLE \\`payload_locked_documents_rels\\`;`)\n  await db.run(sql`DROP TABLE \\`payload_preferences\\`;`)\n  await db.run(sql`DROP TABLE \\`payload_preferences_rels\\`;`)\n  await db.run(sql`DROP TABLE \\`payload_migrations\\`;`)\n}\n"],"names":["sql","up","db","payload","req","run","down"],"mappings":"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"}