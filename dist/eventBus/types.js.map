{"version":3,"sources":["../../src/eventBus/types.ts"],"sourcesContent":["/**\n * Handler for timestamp change notifications.\n */\nexport type TimestampHandler = (timestamp: number) => void\n\n/**\n * EventBus interface for timestamp-based coordination between plugins.\n *\n * Used for coordinating service startup:\n * - Payload notifies Better Auth when it's ready via timestamp\n * - Better Auth subscribes to know when to trigger reconciliation\n *\n * Note: User sync is handled entirely by the reconcile queue on the Better Auth side.\n * The queue processes ensure/delete tasks with retries when users change.\n *\n * Implementations:\n * - RedisEventBus: For distributed production deployments using Redis Pub/Sub\n * - SqlitePollingEventBus: For development/single-server using SQLite polling\n */\nexport interface EventBus {\n  /**\n   * Notify subscribers that a service timestamp has changed.\n   * Used for coordination (e.g., Payload notifying Better Auth it's ready).\n   */\n  notifyTimestampChange(service: string, timestamp: number): void\n\n  /**\n   * Subscribe to timestamp changes for a service.\n   * @returns Unsubscribe function\n   */\n  subscribeToTimestamp(service: string, handler: TimestampHandler): () => void\n}\n\n"],"names":[],"mappings":"AAAA;;CAEC,GAGD;;;;;;;;;;;;;CAaC,GACD,WAYC"}